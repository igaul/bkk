{% extends "washingtonsite_base.dj.html" %}
{% block extra_head %}
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
    $(function() {
        $("#spinner").hide();
        $("#searchform").submit(function() {
            search = $("#search").val();
            searchby = $("#searchby").val();

            if (search != "") {
                ajaxSearch(search, searchby);
            }
            return false;
        });
    });
    
    function ajaxSearch(search, searchby) {
        $("#spinner").show();
        $.getJSON("https://bkk.schepman.org/jsonp?search=" + search + "&searchby=" + searchby + "&jsoncallback=?",
        function(data) {
            $("#results").empty();
            var table = "<table><tr><th>Artist</th><th>Title</th></tr>";
            //array of maps
            $.each(data, function(index, value) {
                table += "<tr><td>" + value['artist'] 
                        + "</td>" + "<td>" + value['title'] + "</td></tr>";
            });
            $("#spinner").hide();
            $("#results").html(table);
        });
    }
</script>
{% endblock extra_head %}
{% block content %}
<div id="form">
    <h1>find your faves!</h1>
    <form id="searchform">
        <p>
            Search by:
            <select id="searchby">
                <option>artist</option>
                <option>title</option>
            </select>
            <input id="search" name="search" type="textbox" />
            <input id="btnSearch" type="submit" value="Go!" />
            <img id="spinner" src="ajaxload.gif" />
        </p>
    </form>
</div>

<div id="results"></div>
<div id="form2"></div>
<div id="results2"></div>
<br />
____________________________________<br />
<br />
if u don't find what you are looking 4 please email songs@babyketten.com with requests!
</body><br />
    </h1>
</div>
{% endblock content %}

